<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/code-sample/themes/atom-one-light.html">
<link rel="import" href="../bower_components/code-sample/code-sample.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="ibmq-components/vaadin-button.html">
<link rel="import" href="app-icons.html">

<dom-module id="app-shell">
  <template>
    <style>
      :host {
        --primary-color: #7B34A1;
        --light-primary-color: #913DBE;
        --dark-primary-color: #6D2E8E;

        --ibmq-button-primary-background-color: var(--dark-primary-color);
        --ibmq-button-primary-focus-background-color: var(--light-primary-color);
        --ibmq-button-secondary-color: #ffffff;
        --ibmq-button-secondary-focus-color: var(--primary-color);

        display: flex;
        flex-direction: column;
      }

      a {
        color: var(--primary-color);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      iron-icon {
        --iron-icon-height: 20px;
        --iron-icon-width: 20px;
      }

      .language {
        position: fixed;
        top: 0;
        right: 1em;
        font-size: 0.8em;
        z-index: 99;
        padding: .5em 1em;
        border-bottom-right-radius: .5em;
        border-bottom-left-radius: .5em;
        background-color: #1b2025;
        color: #ffffff;
      }

      .language a {
        color: #ffffff;
      }

      header,
      footer,
      .collaborators-section {
        padding: 2em 1em;
      }

      header {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        background-color: #1b2024;
        color: #ffffff;
      }

      header img {
        width: 256px;
        height: 256px;
      }

      h1 {
        font-size: 2.6em;
        margin: 0;
      }

      h2 {
        font-size: 1.8em;
        font-weight: 300;
        margin: .2em 0 .6em;
      }

      h3 {
        font-size: 1.7em;
        margin: 0;
      }

      .cards-section {
        display: flex;
        flex-direction: column;
        margin: 0;
        padding: 0;
      }

      .card {
        color: #ffffff;
        padding: 2em;
        overflow: hidden;
      }

      .card:nth-child(1) {
        background-color: var(--dark-primary-color);
      }

      .card:nth-child(2) {
        background-color: var(--primary-color);
      }

      .card:nth-child(3) {
        background-color: var(--light-primary-color);
      }

      .terminal {
        background-color: #1b2024;
        color: #ffffff;
        padding: .5em 1em;
        font-size: 1.2em;
        overflow-x: auto;
      }

      code-sample {
        --code-sample-font-size: .9em;
      }

      .alert {
        color: #464a4e;
        background-color: #e7e8ea;
        border-color: #dddfe2;
        padding: .6em 1em;
      }

      .alert a {
        font-weight: bold;
        color: #000000;
      }

      .collaborators-section {
        max-width: 868px;
        margin: 0 auto;
      }

      .collaborators-list {
        list-style-type: none;
        padding: 0;
        margin: 0;
      }

      .collaborators-list li + li {
        margin-top: .5em;
      }

      .collaborators-list li {
        font-weight: bold;
      }

      footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        background-color: #1b2024;
        color: #ffffff;
      }

      footer a {
        color: #ffffff;
      }

      footer a:hover {
        color: var(--primary-color);
      }

      .social-networks {
        display: flex;
        flex-direction: row;
        list-style-type: none;
        padding: 0;
        margin: 0;
      }

      .social-networks li + li {
        margin-left: 1em;
      }

      @media (min-width: 768px) {
        header,
        footer,
        .collaborators-section {
          padding: 4em 2em;
        }

        header {
          flex-direction: row;
          justify-content: center;
          text-align: left;
        }

        header img {
          margin-right: 1em;
        }

        .cards-section {
          flex-direction: row;
        }

        .card {
          flex: 1;
        }
      }
    </style>

    <app-location route="{{_route}}" use-hash-as-path></app-location>
    <app-route route="{{_route}}" pattern="/:language" data="{{_routeData}}"></app-route>

    <div class="language">
      <a href$="[[rootPath]]#/en">english</a> / <a href$="[[rootPath]]#/ja">japanese</a>
    </div>

    <header>
      <img src$="[[rootPath]]images/qiskit-logo.gif" alt="QISKit logo">
      <div>
        <h1>QISKit</h1>
        <h2>[[localize('title')]]</h2>
        <a href="https://join.slack.com/t/qiskit/shared_invite/enQtMzYyMjY5Nzg2ODk4LTNkMWNmMjc3N2E0ZTdlNzg1Mzk4MDY4YjFlNWZmNTdmZTFkMDFmMjVjZTIxZThjMTlhMjA2MmQxYTViMzhiNzE" target="_blank">
          <vaadin-button theme="primary">
            <iron-icon icon="app-icons:slack"></iron-icon>
            [[localize('joinSlack')]]
          </vaadin-button>
        </a>
      </div>
    </header>

    <main>
      <div class="cards-section">
        <div class="card">
          <h3>
            [[localize('latestVersion')]]
            <a href="https://pypi.python.org/pypi/qiskit">
              <img src="https://img.shields.io/pypi/v/qiskit.svg" alt="QISKit version" style="height: 20px; min-width: 86px;">
            </a>
          </h3>
          <p>[[localize('description')]]</p>
          <p>
            <a href="https://github.com/QISKit/qiskit-sdk-py" target="_blank">
              <vaadin-button theme="secondary">GitHub</vaadin-button>
            </a>
          </p>
          <p>
            <a href="https://github.com/QISKit/qiskit-sdk-py/wiki/Roadmap" target="_blank">
              <vaadin-button theme="secondary">[[localize('roadmapButton')]]</vaadin-button>
            </a>
          </p>
        </div>
        <div class="card">
          <h3>[[localize('learnTitle')]]</h3>
          <p>[[localize('learnDescription')]]</p>
          <p>
            <a href="https://nbviewer.jupyter.org/github/QISKit/qiskit-tutorial/blob/master/index.ipynb" target="_blank">
              <vaadin-button theme="secondary">[[localize('tutorialsButton')]]</vaadin-button>
            </a>
          </p>
          <p>
            <a href$="[[rootPath]]documentation[[_documentationSuffix]]" target="_blank">
              <vaadin-button theme="secondary">[[localize('documentationButton')]]</vaadin-button>
            </a>
          </p>
          <p>
            <a href="https://quantumexperience.ng.bluemix.net" target="_blank">
              <vaadin-button theme="secondary">IBM Q Experience</vaadin-button>
            </a>
          </p>
        </div>
        <div class="card">
          <h3>[[localize('exampleTitle')]]</h3>
          <pre class="terminal">[python3] $ pip install qiskit</pre>
          <code-sample type="python" copy-clipboard-button>
            <!-- htmlmin:ignore -->
            <template preserve-content>
              # Import the QISKit SDK 0.5
              from qiskit import QuantumCircuit, ClassicalRegister, QuantumRegister
              from qiskit import available_backends, execute
              q = QuantumRegister(2)
              c = ClassicalRegister(2)
              qc = QuantumCircuit(q, c)
              qc.h(q[0])
              qc.cx(q[0], q[1])
              qc.measure(q, c)
              job_sim = execute(qc, "local_qasm_simulator")
              sim_result = job_sim.result()
              print(sim_result.get_counts(qc))
            </template>
            <!-- htmlmin:ignore -->
          </code-sample>
          <p class="alert">[[localize('installRequirements')]] <a href$="[[rootPath]]documentation[[_documentationSuffix]]" target="_blank">[[localize('installRequirementsLink')]]</a></p>
        </div>
      </div>

      <div class="collaborators-section">
        <h3>[[localize('collaboratorsTitle')]]</h3>
        <p>[[localize('collaboratorsDescription1')]] <a href="mailto:qiskit@qiskit.org">qiskit@qiskit.org</a>. [[localize('collaboratorsDescription2')]]</p>
        <ul class="collaborators-list">
          <template is="dom-repeat" items="[[collaborators]]" as="collaborator">
            <li>
              <template is="dom-if" if="[[collaborator.url]]">
                <a href$="[[collaborator.url]]" target="_blank">[[collaborator.name]]</a>
              </template>
              <template is="dom-if" if="[[!collaborator.url]]">
                [[collaborator.name]]
              </template>
            </li>
          </template>
        </ul>
      </div>
    </main>

    <footer>
      <div class="social-networks-section">
        <ul class="social-networks">
          <li>
            <a href="https://github.com/QISKit" target="_blank">
              <iron-icon icon="app-icons:github"></iron-icon>
              /QISKit
            </a>
          </li>
          <li>
            <a href="https://twitter.com/QISKit" target="_blank">
              <iron-icon icon="app-icons:twitter"></iron-icon>
              @QISKit
            </a>
          </li>
        </ul>
      </div>
      <div class="copyright">
        <p>QISKit ™ - [[localize('title')]], 2017-2018</p>
      </div>
    </footer>
  </template>

  <script>
    /**
     * Gesture events like tap and track generated from touch will not be
     * preventable, allowing for better scrolling performance.
     */
    Polymer.setPassiveTouchGestures(true);

    class AppShell extends Polymer.mixinBehaviors(
      [Polymer.AppLocalizeBehavior], Polymer.Element
    ) {
      static get is() {
        return 'app-shell';
      }

      static get properties() {
        return {
          language: {
            value: 'en',
            observer: 'languageChanged'
          },

          _route: {
            type: Object
          },

          _routeData: {
            type: Object,
            observer: '_routeDataChanged'
          },

          _documentationSuffix: {
            type: String
          },

          collaborators: {
            type: Array,
            value: () => [
              {
                name: 'IBM Research',
                url: 'https://www.research.ibm.com'
              },
              {
                name: 'Alexandre Blais (Université de Sherbrooke)',
                url: 'https://www.physique.usherbrooke.ca/blais/index.php?sec=accueil&lan=EN'
              },
              {
                name: 'Robin Blume Kohout (Sandia)',
                url: 'https://cfwebprod.sandia.gov/cfdocs/CompResearch/index.cfm'
              },
              {
                name: 'Francesco Buscemi (Nagoya University)',
                url: 'http://www.math.cm.is.nagoya-u.ac.jp/Staff/buscemi-en.html'
              },
              {
                name: 'Jonas Bylander (Chalmers University of Technology)',
                url: 'http://www.chalmers.se/en/staff/Pages/Jonas-Bylander.aspx'
              },
              {
                name: 'Isaac Chuang (MIT)',
                url: 'http://web.mit.edu/physics/people/faculty/chuang_isaac.html'
              },
              {
                name: 'Vincent Dwyer (Loughborough University)',
                url: 'http://www.lboro.ac.uk/departments/meme/staff/vincent-m-dwyer/'
              },
              {
                name: 'Mark Everitt (Loughborough University)',
                url: 'http://www.lboro.ac.uk/departments/physics/staff/academic/mark-everitt/'
              },
              {
                name: 'Michael Geller (University of Georgia)',
                url: 'https://www.physast.uga.edu/people/michael_geller'
              },
              {
                name: 'Thomas Haener (ETH Zurich/ProjectQ)',
                url: 'http://www.projectq.ch'
              },
              {
                name: 'Andrew Houck (Princeton)',
                url: 'http://ee.princeton.edu/people/faculty/andrew-houck'
              },
              {
                name: 'Thomas Ihn (ETHZ)',
                url: 'https://people.phys.ethz.ch/~ihn/'
              },
              {
                name: 'Sabre Kais (Purdue)',
                url: 'https://www.chem.purdue.edu/kais/'
              },
              {
                name: 'Miguel Ángel Martín-Delgado (Universidad Complutense de Madrid)',
                url: 'http://gicc.fis.ucm.es/people/mamd.html'
              },
              {
                name: 'Rod Van Meter (Keio University)',
                url: 'http://aqua.sfc.wide.ad.jp/'
              },
              {
                name: 'Harumichi Nishimura (Nagoya University)',
                url: 'http://www.math.cm.is.nagoya-u.ac.jp/~hnishimura/list.html'
              },
              {
                name: 'Russell Rundle (Loughborough University)',
                url: ''
              },
              {
                name: 'Enrique Solano (University of the Basque Country and Shanghai University)',
                url: 'http://www.qutisgroup.com'
              },
              {
                name: 'Damian Steiger (ETH Zurich /ProjectQ)',
                url: 'http://www.projectq.ch'
              },
              {
                name: 'Todd Tilma (Tokyo Institute of Technology)',
                url: 'https://www.titech.ac.jp/english/'
              },
              {
                name: 'Christophe Vuillot (QuTech institute at TU Delft)',
                url: 'https://qutech.nl/person/christopher-vuillot/'
              },
              {
                name: 'Martin Weides (Karlsruhe Institute of Technology)',
                url: 'https://www.phi.kit.edu/wissenschaftler_weides_martin.php'
              },
              {
                name: 'James Wootton (University of Basel)',
                url: 'https://sites.google.com/site/woottonjames/home'
              },
              {
                name: 'Shigeru Yamashita (Ritsumeikan University)',
                url: 'http://www.ngc.is.ritsumei.ac.jp/~ger/english-2/'
              }
            ]
          }
        };
      }

      connectedCallback() {
        super.connectedCallback();

        this.loadResources(this.resolveUrl('locales.json'));
      }

      languageChanged(language) {
        this.set('_documentationSuffix', language === 'ja' ? '/ja/' : '');
      }

      _routeDataChanged(_routeData) {
        if (_routeData.language) {
          this.set('language', _routeData.language);
        }
      }
    }

    window.customElements.define(AppShell.is, AppShell);
  </script>
</dom-module>
