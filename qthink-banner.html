<link rel="import" href="./app-icons.html">
<link rel="import" href="./components/polymer/polymer-element.html">
<link rel="import" href="./components/ibm-q-components/components/icons/ibm-q-action-based-icons.html">
<link rel="import" href="./components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./components/ibm-q-components/components/button/ibm-q-button.html">

<dom-module id="qthink-banner">
  <template>
    <style>
      :host {
        display: block;
        color: #000000;
        padding: 0;
        position: relative;
        border: 1px solid black;
        background-color: #EAEAEA;
      }

      :host([collapsed]) {
        cursor: pointer;
      }

      .image {
        background-image: url("https://www.research.ibm.com/ibm-q/thinkq/images/leadspace-large.jpg?v4");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center right;
        height: 166px;
      }

      .logo {
        max-width: 295px;
        width: 80%;
        height: auto;
        padding-top: 60px;
        padding-left: 60px;
      }

      paper-icon-button {
        position: absolute;
        top: 8px;
        right: 8px;
      }

      .content {
        padding: 20px;
      }

      .title {
        margin-bottom: .5em;
        font-size: 1.4em;
        font-weight: bold;
        max-width: 70%;
        padding-left: 40px;
      }

      .description {
        font-size: 1.2em;
        max-width: 70%;
        padding-left: 40px;
      }

      ibm-q-button {
        --ibm-q-button-secondary-color: #000000;
        --ibm-q-button-secondary-focus-color: #ffffff;
        float: right;
        padding-right: 40px;
      }

      paper-icon-button {
        z-index: 100;
      }

      @media (max-width: 600px) {
        .title {
          padding-left: 0;
        }

        .description {
          padding-left: 0;
        }
      }

      .arrow {
        transition: all 250ms cubic-bezier(0.5, 0, 0.1, 1);
      }

      :host([collapsed]) .arrow {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
      }

      :host([collapsed]) .image,
      :host([collapsed]) ibm-q-button {
        display: none;
      }

      :host([collapsed]) .title {
        margin-bottom: 0;
      }

    </style>

    <paper-icon-button
        icon="inline:arrow-drop-up"
        class="arrow"
        on-click="_closeButtonClicked">
    </paper-icon-button>

    <div class="image">
      <img src="https://www.research.ibm.com/ibm-q/thinkq/images/logo-thinkq.png?v1" class="logo" />
    </div>

    <div class="content">
      <a href="https://www.research.ibm.com/ibm-q/thinkq/" id="link" target="_blank">
        <ibm-q-button secondary>More info here</ibm-q-button>
      </a>
      <div class="title">Approximate Quantum Computing: From advantage to applications</div>
      <div class="description">December 6-8, 2017 @ Yorktown Heights, NY</div>
    </div>
  </template>
  <script>
    class QThinkBanner extends Polymer.Element {
      static get is() {
        return 'qthink-banner';
      }

      static get properties() {
        return {
          collapsed: {
            type: Boolean,
            value: false,
            reflectToAttribute: true,
            notify: true
          }
        };
      }

      connectedCallback() {
        super.connectedCallback();
        this.collapsed = JSON.parse(window.localStorage.getItem('collapsedQThinkBanner')) || false;

        this.addEventListener('click', function(event) {
          if (this.collapsed && event.path[0].nodeName !== 'IRON-ICON') {
            this.$.link.click();
          }
        });
      }

      _closeButtonClicked() {
        this.collapsed = !this.collapsed;
        window.localStorage.setItem('collapsedQThinkBanner', this.collapsed);
      }
    }

    customElements.define(QThinkBanner.is, QThinkBanner);
  </script>
</dom-module>
